# DMarshall - A01073629
# AWallentine - A01107224

init:
    irmovl Stack, %esp
    irmovl Stack, %ebp
    call main
    halt
    .align 4

main:
    pushl %ebp
    rrmovl %esp,%ebp
    irmovl ele1, %eax
    pushl %eax
    irmovl $0, %eax
    call rsum_list
    ret

rsum_list:
    pushl %ebp
    rrmovl %esp, %ebp
    mrmovl 8(%ebp), %ebx
    irmovl $0, %ecx
    pushl %ebx
    subl %ecx, %ebx
    popl %ebx
    je rsum_list_finish
    mrmovl (%ebx), %edx
    addl %edx, %eax
    mrmovl 4(%ebx), %ebx
    pushl %ebx
    call rsum_list
rsum_list_finish:
    ret

# Sample linked list
.align 4
ele1:
    .long 0x00a
    .long ele2
ele2:
    .long 0x0b0
    .long ele3
ele3:
    .long 0xc00
    .long 0

# Allocate space for stack
.pos 0x200
Stack:

